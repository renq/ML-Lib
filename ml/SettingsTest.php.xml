<?xml version="1.0" encoding="UTF-8"?>
<testFile fullPath="/home/renq/Projects/www/ml_lib/tests//sql/SettingsTest.php" shortenedPath="sql/SettingsTest.php" generated="1298673637" phpunit="3.4.13">
  <line lineNumber="1">
    <body>&lt;?php</body>
  </line>
  <line lineNumber="2">
    <body></body>
  </line>
  <line lineNumber="3">
    <body>use ml\sql\Settings;</body>
  </line>
  <line lineNumber="4">
    <body></body>
  </line>
  <line lineNumber="5">
    <body>require_once dirname(__FILE__) . '/../../ml/ml.php';</body>
  </line>
  <line lineNumber="6">
    <body></body>
  </line>
  <line lineNumber="7">
    <body></body>
  </line>
  <line lineNumber="8">
    <body>class SettingsTest extends PHPUnit_Framework_TestCase {</body>
  </line>
  <line lineNumber="9">
    <body>	</body>
  </line>
  <line lineNumber="10">
    <body>	</body>
  </line>
  <line lineNumber="11">
    <body>	/*</body>
  </line>
  <line lineNumber="12">
    <body>    public function testDsn() {</body>
  </line>
  <line lineNumber="13">
    <body>    	$dsnList = array(</body>
  </line>
  <line lineNumber="14">
    <body>    			'mysql://root:myFancyPassw0rd@localhost/dbname',</body>
  </line>
  <line lineNumber="15">
    <body>	    	'mysql://localhost/dbname',</body>
  </line>
  <line lineNumber="16">
    <body>	    	'sqlite:///dbname?mode=0666',</body>
  </line>
  <line lineNumber="17">
    <body>    		'sqlite:///dbname/foo/bar/baz.db',</body>
  </line>
  <line lineNumber="18">
    <body>	    	'mysql://root:myFancyPassw0rd@localhost:33306/dbname',</body>
  </line>
  <line lineNumber="19">
    <body>	    	'mysql://:withoutLogin@localhost/dbname',</body>
  </line>
  <line lineNumber="20">
    <body>	    	'mysql://:withoutLogin@some.host:2222/dbname',</body>
  </line>
  <line lineNumber="21">
    <body>	    	'pgsql://pglogin:pa%40&amp;*(%^%3a@host/schema',</body>
  </line>
  <line lineNumber="22">
    <body>	    		'pgsql://pglogin:p%40a&amp;*(%^%3a@host:32311/schema',</body>
  </line>
  <line lineNumber="23">
    <body>    	);</body>
  </line>
  <line lineNumber="24">
    <body>    	</body>
  </line>
  <line lineNumber="25">
    <body>    	foreach ($dsnList as $dsn) {</body>
  </line>
  <line lineNumber="26">
    <body>    		$settings = new Settings($dsn);</body>
  </line>
  <line lineNumber="27">
    <body>    	}</body>
  </line>
  <line lineNumber="28">
    <body>    }    */</body>
  </line>
  <line lineNumber="29">
    <body></body>
  </line>
  <line lineNumber="30">
    <body>    </body>
  </line>
  <line lineNumber="31">
    <body>    public function testProtoUserPassHostPortName() {</body>
  </line>
  <line lineNumber="32">
    <body>    	$connections = array(</body>
  </line>
  <line lineNumber="33">
    <body>    		array('mysql', 'root', 'pass', 'localhost', '3306', 'dbname'),</body>
  </line>
  <line lineNumber="34">
    <body>    		array('mysql', 'user', '&amp;*3jxsS', 'my-mysql.com.pl', '3307', 'database_name'),</body>
  </line>
  <line lineNumber="35">
    <body>    	);</body>
  </line>
  <line lineNumber="36">
    <body>    	foreach ($connections as $connection) {</body>
  </line>
  <line lineNumber="37">
    <body>    		list($driver, $user, $password, $host, $port, $dbname) = $connection;</body>
  </line>
  <line lineNumber="38">
    <body>    		$dsn = "$driver://$user:$password@$host:$port/$dbname";</body>
  </line>
  <line lineNumber="39">
    <body>    		$settings = new Settings($dsn);</body>
  </line>
  <line lineNumber="40">
    <body>    		</body>
  </line>
  <line lineNumber="41">
    <body>    		$this-&gt;assertEquals($settings-&gt;getDriver(), $driver);</body>
  </line>
  <line lineNumber="42">
    <body>    		$this-&gt;assertEquals($settings-&gt;getUsername(), $user);</body>
  </line>
  <line lineNumber="43">
    <body>    		$this-&gt;assertEquals($settings-&gt;getPassword(), $password);</body>
  </line>
  <line lineNumber="44">
    <body>    		$this-&gt;assertEquals($settings-&gt;getHost(), $host);</body>
  </line>
  <line lineNumber="45">
    <body>    		$this-&gt;assertEquals($settings-&gt;getPort(), $port);</body>
  </line>
  <line lineNumber="46">
    <body>    		$this-&gt;assertEquals($settings-&gt;getDatabase(), $dbname);</body>
  </line>
  <line lineNumber="47">
    <body>    	}</body>
  </line>
  <line lineNumber="48">
    <body>    }</body>
  </line>
  <line lineNumber="49">
    <body>    </body>
  </line>
  <line lineNumber="50">
    <body>    </body>
  </line>
  <line lineNumber="51">
    <body>    public function testProtoUserPassHostName() {</body>
  </line>
  <line lineNumber="52">
    <body>    	$connections = array(</body>
  </line>
  <line lineNumber="53">
    <body>    		array('mysql', 'root', 'pass', 'localhost', 'dbname'),</body>
  </line>
  <line lineNumber="54">
    <body>    		array('mysql', 'user', '&amp;*3jxsS', 'my-mysql.com.pl', 'database_name'),</body>
  </line>
  <line lineNumber="55">
    <body>    		array('mysql', 'user', '', '127.0.0.1', 'database_name'),</body>
  </line>
  <line lineNumber="56">
    <body>    	);</body>
  </line>
  <line lineNumber="57">
    <body>    	foreach ($connections as $connection) {</body>
  </line>
  <line lineNumber="58">
    <body>    		list($driver, $user, $password, $host, $dbname) = $connection;</body>
  </line>
  <line lineNumber="59">
    <body>    		$dsn = "$driver://$user:$password@$host/$dbname";</body>
  </line>
  <line lineNumber="60">
    <body>    		$settings = new Settings($dsn);</body>
  </line>
  <line lineNumber="61">
    <body>    		</body>
  </line>
  <line lineNumber="62">
    <body>    		$this-&gt;assertEquals($settings-&gt;getDriver(), $driver);</body>
  </line>
  <line lineNumber="63">
    <body>    		$this-&gt;assertEquals($settings-&gt;getUsername(), $user);</body>
  </line>
  <line lineNumber="64">
    <body>    		$this-&gt;assertEquals($settings-&gt;getPassword(), $password);</body>
  </line>
  <line lineNumber="65">
    <body>    		$this-&gt;assertEquals($settings-&gt;getHost(), $host);</body>
  </line>
  <line lineNumber="66">
    <body>    		$this-&gt;assertEquals($settings-&gt;getDatabase(), $dbname);</body>
  </line>
  <line lineNumber="67">
    <body>    	}</body>
  </line>
  <line lineNumber="68">
    <body>    }</body>
  </line>
  <line lineNumber="69">
    <body>    </body>
  </line>
  <line lineNumber="70">
    <body>    </body>
  </line>
  <line lineNumber="71">
    <body>    public function testProtoUserHostName() {</body>
  </line>
  <line lineNumber="72">
    <body>    	$connections = array(</body>
  </line>
  <line lineNumber="73">
    <body>    		array('mysql', 'root', 'localhost', 'dbname'),</body>
  </line>
  <line lineNumber="74">
    <body>    		array('mysql', 'user', 'my-mysql.com.pl', 'database_name'),</body>
  </line>
  <line lineNumber="75">
    <body>    		array('mysql', 'user', '127.0.0.1', 'database_name'),</body>
  </line>
  <line lineNumber="76">
    <body>    	);</body>
  </line>
  <line lineNumber="77">
    <body>    	foreach ($connections as $connection) {</body>
  </line>
  <line lineNumber="78">
    <body>    		list($driver, $user, $host, $dbname) = $connection;</body>
  </line>
  <line lineNumber="79">
    <body>    		$dsn = "$driver://$user@$host/$dbname";</body>
  </line>
  <line lineNumber="80">
    <body>    		$settings = new Settings($dsn);</body>
  </line>
  <line lineNumber="81">
    <body>    		</body>
  </line>
  <line lineNumber="82">
    <body>    		$this-&gt;assertEquals($settings-&gt;getDriver(), $driver);</body>
  </line>
  <line lineNumber="83">
    <body>    		$this-&gt;assertEquals($settings-&gt;getUsername(), $user);</body>
  </line>
  <line lineNumber="84">
    <body>    		$this-&gt;assertEquals($settings-&gt;getHost(), $host);</body>
  </line>
  <line lineNumber="85">
    <body>    		$this-&gt;assertEquals($settings-&gt;getDatabase(), $dbname);</body>
  </line>
  <line lineNumber="86">
    <body>    	}</body>
  </line>
  <line lineNumber="87">
    <body>    }</body>
  </line>
  <line lineNumber="88">
    <body>    </body>
  </line>
  <line lineNumber="89">
    <body>    </body>
  </line>
  <line lineNumber="90">
    <body>    public function testProtoHostName() {</body>
  </line>
  <line lineNumber="91">
    <body>    	$connections = array(</body>
  </line>
  <line lineNumber="92">
    <body>    		array('mysql', 'localhost', 'dbname'),</body>
  </line>
  <line lineNumber="93">
    <body>    		array('mysql', 'my-mysql.com.pl', 'database_name'),</body>
  </line>
  <line lineNumber="94">
    <body>    		array('mysql', '127.0.0.1', 'database_name'),</body>
  </line>
  <line lineNumber="95">
    <body>    	);</body>
  </line>
  <line lineNumber="96">
    <body>    	foreach ($connections as $connection) {</body>
  </line>
  <line lineNumber="97">
    <body>    		list($driver, $host, $dbname) = $connection;</body>
  </line>
  <line lineNumber="98">
    <body>    		$dsn = "$driver://$host/$dbname";</body>
  </line>
  <line lineNumber="99">
    <body>    		$settings = new Settings($dsn);</body>
  </line>
  <line lineNumber="100">
    <body>    		</body>
  </line>
  <line lineNumber="101">
    <body>    		$this-&gt;assertEquals($settings-&gt;getDriver(), $driver);</body>
  </line>
  <line lineNumber="102">
    <body>    		$this-&gt;assertEquals($settings-&gt;getHost(), $host);</body>
  </line>
  <line lineNumber="103">
    <body>    		$this-&gt;assertEquals($settings-&gt;getDatabase(), $dbname);</body>
  </line>
  <line lineNumber="104">
    <body>    	}</body>
  </line>
  <line lineNumber="105">
    <body>    }</body>
  </line>
  <line lineNumber="106">
    <body>    </body>
  </line>
  <line lineNumber="107">
    <body>    </body>
  </line>
  <line lineNumber="108">
    <body>    public function testProtoHost() {</body>
  </line>
  <line lineNumber="109">
    <body>    	$connections = array(</body>
  </line>
  <line lineNumber="110">
    <body>    		array('mysql', '127.0.0.2'),</body>
  </line>
  <line lineNumber="111">
    <body>    		array('pgsql', 'localhost'),</body>
  </line>
  <line lineNumber="112">
    <body>    	);</body>
  </line>
  <line lineNumber="113">
    <body>    	foreach ($connections as $connection) {</body>
  </line>
  <line lineNumber="114">
    <body>    		list($driver, $host) = $connection;</body>
  </line>
  <line lineNumber="115">
    <body>    		$dsn = "$driver://$host";</body>
  </line>
  <line lineNumber="116">
    <body>    		$settings = new Settings($dsn);</body>
  </line>
  <line lineNumber="117">
    <body>    		</body>
  </line>
  <line lineNumber="118">
    <body>    		$this-&gt;assertEquals($settings-&gt;getDriver(), $driver, "Parse: $dsn");</body>
  </line>
  <line lineNumber="119">
    <body>    		$this-&gt;assertEquals($settings-&gt;getHost(), $host, "Parse: $dsn");</body>
  </line>
  <line lineNumber="120">
    <body>    	}</body>
  </line>
  <line lineNumber="121">
    <body>    }</body>
  </line>
  <line lineNumber="122">
    <body>    </body>
  </line>
  <line lineNumber="123">
    <body>    </body>
  </line>
  <line lineNumber="124">
    <body>    public function testProtoDatabase() {</body>
  </line>
  <line lineNumber="125">
    <body>    	$connections = array(</body>
  </line>
  <line lineNumber="126">
    <body>    		array('mysql', 'dbname'),</body>
  </line>
  <line lineNumber="127">
    <body>    		array('sqlite', 'database_name'),</body>
  </line>
  <line lineNumber="128">
    <body>    		array('sqlite', '/home/www/db/my_site.db'),</body>
  </line>
  <line lineNumber="129">
    <body>    		array('sqlite', '/home/www/db/my_site.db?mode=666'),</body>
  </line>
  <line lineNumber="130">
    <body>    	);</body>
  </line>
  <line lineNumber="131">
    <body>    	foreach ($connections as $connection) {</body>
  </line>
  <line lineNumber="132">
    <body>    		list($driver, $dbname) = $connection;</body>
  </line>
  <line lineNumber="133">
    <body>    		$dsn = "$driver:///$dbname";</body>
  </line>
  <line lineNumber="134">
    <body>    		$settings = new Settings($dsn);</body>
  </line>
  <line lineNumber="135">
    <body>    		</body>
  </line>
  <line lineNumber="136">
    <body>    		$this-&gt;assertEquals($settings-&gt;getDriver(), $driver, "Parse: $dsn");</body>
  </line>
  <line lineNumber="137">
    <body>    		$this-&gt;assertEquals($settings-&gt;getDatabase(), $dbname, "Parse: $dsn");</body>
  </line>
  <line lineNumber="138">
    <body>    	}</body>
  </line>
  <line lineNumber="139">
    <body>    }</body>
  </line>
  <line lineNumber="140">
    <body>    </body>
  </line>
  <line lineNumber="141">
    <body>    </body>
  </line>
  <line lineNumber="142">
    <body>    public function testEscapeSpecialChars() {</body>
  </line>
  <line lineNumber="143">
    <body>    	$password = 'mx@""::#$:%^&amp;*()';</body>
  </line>
  <line lineNumber="144">
    <body>    	$encodedPassword = urlencode($password);</body>
  </line>
  <line lineNumber="145">
    <body>    	$dsn = "mysql://root:$encodedPassword@localhost/sqldb";</body>
  </line>
  <line lineNumber="146">
    <body>    	$settings = new Settings($dsn);</body>
  </line>
  <line lineNumber="147">
    <body>    	</body>
  </line>
  <line lineNumber="148">
    <body>    	$this-&gt;assertEquals($settings-&gt;getPassword(), $password);</body>
  </line>
  <line lineNumber="149">
    <body>    }</body>
  </line>
  <line lineNumber="150">
    <body>    </body>
  </line>
  <line lineNumber="151">
    <body>    </body>
  </line>
  <line lineNumber="152">
    <body>    public function testClearPassword() {</body>
  </line>
  <line lineNumber="153">
    <body>    	$password = 'god';</body>
  </line>
  <line lineNumber="154">
    <body>    	$settings = new Settings("mysql://root:$password@localhost/db");</body>
  </line>
  <line lineNumber="155">
    <body>    	$this-&gt;assertEquals($settings-&gt;getPassword(), $password);</body>
  </line>
  <line lineNumber="156">
    <body>    	$settings-&gt;clearPassword();</body>
  </line>
  <line lineNumber="157">
    <body>    	$this-&gt;assertNotEquals($settings-&gt;getPassword(), $password);</body>
  </line>
  <line lineNumber="158">
    <body>    }</body>
  </line>
  <line lineNumber="159">
    <body></body>
  </line>
  <line lineNumber="160">
    <body></body>
  </line>
  <line lineNumber="161">
    <body>}</body>
  </line>
</testFile>
